<html>
    <head>
        <link rel="stylesheet" href="/static/bootstrap.min.css">
        <link rel="stylesheet" href="/static/main.css">
        <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="static/typeahead.bundle.js"></script>
        <link rel="stylesheet" href="/static/custom_search.css">
    </head>
    <body>
        <div class="topcorner">
            <p>Project Name: {{ name }}</p>
            <p>Student Name: ({{ netid }})</p>
        </div>
        
        <form class="form-inline global-search" style="width: 100%">
            <div class="header">
                <h1 style="font-size: 55px; font-family:Futura; color: black">
                    Tastes Like Home 
                </h1>
            </div>
            
            <br><br>
            <div class="form-row" style="height: 12%">
                <div class="form-group col-md-6">
                    <input id="restaurant" type="text" name="search_restaurant" class="form-control typeahead" placeholder="Your favourite restaurant">
                </div>
                <div class="form-group col-md-5">
                    <input id="city" type="text" name="search_city" class="form-control typeahead" placeholder="Your target city">
                </div>                
            </div>

            <br><br>
            <div class="form-row" style="height: 12%">
                <button type="submit" class="btn btn-info btn-lg"> Go! </button>
            </div>
        </form>

        <!--CITATION: CinemaPop auto-complete: https://github.com/erikjchan/cs4300sp2018-cinemapop/blob/master/app/templates/search.html-->
        <!--CITATION: typeahead.js examples: http://twitter.github.io/typeahead.js/examples/-->
        <script>
            // Typeahead initialization for restaurant name auto-complete
            let restaurantNames = new Bloodhound({
              datumTokenizer: Bloodhound.tokenizers.whitespace,
              queryTokenizer: Bloodhound.tokenizers.whitespace,
              prefetch: {
                url: 'static/all_splits/restaurant_names.json'
              }
            });
            $('#restaurant').typeahead(
                {
                    minLength: 2,
                    highlight: true
                }, 
                {
                    name: 'restaurant-names',
                    source: restaurantNames
                }
            );

            // Typeahead initialization for city name auto-complete
            let cityNames = new Bloodhound({
              datumTokenizer: Bloodhound.tokenizers.whitespace,
              queryTokenizer: Bloodhound.tokenizers.whitespace,
              prefetch: {
                url: 'static/all_splits/cities.json'
              }
            });
            $('#city').typeahead(
                {
                    highlight: true
                }, 
                {
                    name: 'city-names',
                    source: cityNames
                }
            );
        </script>

        <form class="form-inline global-search">
        {% if data %}
            <h1>{{output_message}}</h1>
            {% for d in data %}  
                <br>
                <p><h2>{{d}}</h2></p>
            {% endfor %}
        {% endif %}
        </form>
    </body>

</html>